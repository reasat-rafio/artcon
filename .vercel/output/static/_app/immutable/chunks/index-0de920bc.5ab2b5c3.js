import{_ as ie}from"./preload-helper.cf010ec4.js";import{ap as Kn,aq as Xn,ar as Yn,as as $n,r as u,at as Te,au as Re,av as ne,u as J,aw as mn,s as A,F as O,ax as Jn,j as e,P as le,G as de,a0 as ve,ay as ke,az as z,aA as qn,aB as Zn,aC as xn,aD as Q,C as V,T as D,af as Qn,ag as ue,m as _e,aE as et,w as te,ao as gn,B as C,d as W,y as jn,aF as Pe,aG as nt,aH as tt,aI as st,aJ as ot,aK as pe,f as Me,b as Oe,A as at,aL as it,aM as rt,aN as ct,aO as q,aP as lt,aQ as dt,aR as ut,aS as se,W as pt,aT as Le,aU as Y,x as N,aV as ht,aW as he,aX as ft,h as bn,l as yn,aY as mt,aZ as xt,D as gt,a_ as jt,a$ as bt,q as vn,b0 as yt,b1 as vt,b2 as Fe,b3 as fe,b4 as _n,b5 as _t,b6 as Pn,g as Pt,b7 as St,b8 as Se,b9 as Sn,ba as wt,bb as It,e as Ct,bc as Et,bd as Dt,be as wn,bf as Tt,bg as Rt,bh as kt,L as F,v as In,Y as H,t as Mt,Q as Cn,bi as Ot,bj as Lt,bk as En,bl as we,bm as zt,bn as Dn,bo as He,bp as At,bq as Tn,br as Bt,bs as Wt,bt as Nt,bu as ze,bv as Ft,bw as Ie,bx as Ht,by as Vt,bz as ge,bA as Ut,bB as Gt,bC as Kt,bD as Xt,M as Yt,Z as Ve,bE as Ae,bF as $t,bG as Jt,bH as qt,bI as je,H as Zt,bJ as Ue,bK as Ce,bL as Rn,R as Qt,bM as es,bN as ns,bO as Be,bP as ts,bQ as ss,bR as os,bS as as,ah as is,bT as rs,a1 as cs,bU as ls,bV as ds,bW as us,z as ps,bX as Ee,bY as hs,bZ as fs,b_ as ms,b$ as xs,a as gs,c0 as js,c1 as bs,c2 as De,c3 as ys,c4 as vs,c5 as _s,c6 as Ge,a4 as Ps,a5 as Ss,c7 as kn,c8 as Mn,c9 as On,ca as Ln,cb as ws,cc as Is,cd as Cs,ce as Es,cf as be}from"./4.0538efa9.js";import{H as Ds,J as Ts}from"./index.4559c780.js";function zn(t,n){var s=typeof n=="object";return new Promise(function(a,o){var l=new Kn({next:function(i){a(i),l.unsubscribe()},error:o,complete:function(){s?a(n.defaultValue):o(new Xn)}});t.subscribe(l)})}function Rs(){return Yn(function(t,n){var s,a=!1;t.subscribe($n(n,function(o){var l=s;s=o,a&&n.next([l,o]),a=!0}))})}var Ke,Xe,Ye,$e,Je,qe,Ze,Qe,en,nn,tn,sn,on,an;function B(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}const We=t=>{const{actions:n,children:s,actionProps:a,onActionComplete:o}=t;return e.jsx(Sn,{onReset:o,hooks:n,args:a,children:s})},ks=t=>{const{badges:n,children:s,badgeProps:a,...o}=t;return e.jsx(Sn,{...o,hooks:n,args:a,children:s})},Ms=[];function Os(t){const{children:n,flatIndex:s,index:a,params:o,payload:l,siblingIndex:i}=t,{navigate:r,navigateIntent:c}=Te(),d=Re(),h=u.useMemo(()=>(d==null?void 0:d.panes)||Ms,[d==null?void 0:d.panes]),p=a-1,x=u.useCallback(m=>{const f=h[p]||[],b=f[i],_=m(f,b),v=[...h.slice(0,p),_,...h.slice(p+1)],I={...d||{},panes:v};return setTimeout(()=>r(I),0),I},[p,r,h,d,i]),j=u.useCallback(m=>{x((f,b)=>[...f.slice(0,i),{...b,payload:m},...f.slice(i+1)])},[x,i]),g=u.useCallback(m=>{x((f,b)=>[...f.slice(0,i),{...b,params:m},...f.slice(i+1)])},[x,i]),y=u.useCallback(m=>{let{id:f,parentRefPath:b,type:_,template:v}=m;r({panes:[...h.slice(0,p+1),[{id:f,params:{template:v.id,parentRefPath:wt(b),type:_},payload:v.params}]]})},[p,r,h]),P=u.useMemo(()=>({index:s,groupIndex:p,siblingIndex:i,payload:l,params:o,hasGroupSiblings:h[p]?h[p].length>1:!1,groupLength:h[p]?h[p].length:0,routerPanesState:h,ChildLink:It,BackLink:Ct,ReferenceChildLink:Et,handleEditReference:y,ParameterizedLink:Dt,replaceCurrent:function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};x(()=>[{id:m.id||"",payload:m.payload,params:m.params||{}}])},closeCurrent:()=>{x((m,f)=>m.length>1?m.filter(b=>b!==f):m)},duplicateCurrent:m=>{x((f,b)=>{const _={...b,payload:(m==null?void 0:m.payload)||b.payload,params:(m==null?void 0:m.params)||b.params};return[...f.slice(0,i),_,...f.slice(i)]})},setView:m=>{const f=wn(o,"view");return g(m?{...f,view:m}:f)},setParams:g,setPayload:j,navigateIntent:c}),[s,p,y,x,c,o,l,h,g,j,i]);return e.jsx(Tt.Provider,{value:P,children:n})}function Ls(t,n,s,a){var o,l;const i={flex:t.left.flex+t.right.flex,width:t.left.width+t.right.width},r=(o=n.minWidth)!=null?o:De,c=(l=s.minWidth)!=null?l:De,d=Math.min(n.maxWidth||1/0,i.width-c),h=Math.min(s.maxWidth||1/0,i.width-r);let p=r-t.left.width;const x=t.right.width-h;p<x&&(p=x);let j=t.right.width-c;const g=d-t.left.width;j>g&&(j=g);const y=Math.min(Math.max(a,p),j),P=t.left.width+y,m=t.right.width-y,f=P/i.width*i.flex,b=m/i.width*i.flex;return{leftFlex:f,leftW:P,rightFlex:b,rightW:m}}function zs(t,n){const s=[];let a=n;for(;a!==t;){const o=a.parentElement;if(!o)return s;const i=Array.from(o.childNodes).indexOf(a);if(s.unshift(i),o===t)return s;a=o}return s}const rn=[];function As(t,n){const s=new WeakMap;for(const o of n)s.set(o,zs(t,o));const a=(o,l)=>{const i=s.get(o)||rn,r=s.get(l)||rn,c=Math.max(i.length,r.length);for(let d=0;d<c;d+=1){const h=i[d]||-1,p=r[d]||-1;if(h!==p)return h-p}return 0};n.sort(a)}function Bs(){const t=[],n=[],s=new WeakMap,a=new Set,o={};let l=null,i=0,r=null,c=new Map,d=!1;function h(f){a.add(f),r===f&&(r=null),m()}function p(f){a.delete(f),r=f,m()}function x(f,b){return s.set(f,{...b,original:b}),n.push(f),l&&As(l,n),p(f),()=>{const _=n.indexOf(f);_>-1&&n.splice(_,1),s.delete(f),m()}}function j(f,b,_){var v,I,E,w;const S=n.indexOf(b),k=s.get(b);if(!k)return;const M=n[S+1],R=s.get(M);if(R){if(f==="start"&&(d=!0,o.left={element:b,flex:k.flex||1,width:b.offsetWidth},o.right={element:M,flex:R.flex||1,width:M.offsetWidth},m()),f==="move"&&o.left&&o.right){c=new Map;const{leftW:T,rightW:L,leftFlex:U,rightFlex:Z}=Ls(o,k,R,_);c.set(b,{flex:U,width:T}),c.set(M,{flex:Z,width:L}),m()}if(f==="end"){d=!1;const T=c.get(b),L=c.get(M);s.set(b,{...k,currentMinWidth:0,currentMaxWidth:(v=k.maxWidth)!=null?v:1/0,flex:(I=T==null?void 0:T.flex)!=null?I:k.flex}),s.set(M,{...R,currentMinWidth:0,currentMaxWidth:(E=k.maxWidth)!=null?E:1/0,flex:(w=L==null?void 0:L.flex)!=null?w:R.flex}),c=new Map,delete o.left,delete o.right,m()}}}function g(f){l=f}function y(f){i=f,m()}function P(f){return t.push(f),()=>{const b=t.push(f);b>-1&&t.splice(b,1)}}return{collapse:h,expand:p,mount:x,resize:j,setRootElement:g,setRootWidth:y,subscribe:P};function m(){var f,b,_,v;if(!i)return;const I=[];for(const T of n)T!==r&&I.unshift(T);r&&I.unshift(r);const E=new WeakMap,w=I.length,S=I[0],k=(w-1)*be;let M=i-k;for(const T of I){const L=s.get(T);if(!L)continue;const U=L.currentMinWidth||L.minWidth||De,Z=T===S,xe=a.has(T),oe=U>M,ae=Z?!1:xe||oe,G=c.get(T);E.set(T,{element:T,collapsed:ae,currentMinWidth:(f=G==null?void 0:G.width)!=null?f:L.currentMinWidth,currentMaxWidth:(b=G==null?void 0:G.width)!=null?b:L.currentMaxWidth,flex:(v=(_=G==null?void 0:G.flex)!=null?_:L.flex)!=null?v:1}),ae?M-=be:M-=U-be}const R=[];for(const T of n){const L=E.get(T);L&&R.push(L)}for(const T of t)T({expandedElement:r||n[n.length-1]||null,panes:R,resizing:d})}}function Ws(t){const{children:n,minWidth:s,onCollapse:a,onExpand:o,...l}=t,i=u.useMemo(()=>Bs(),[]),[r,c]=u.useState(null),d=he(r),h=(d==null?void 0:d.width)||0,p=h===void 0||!s?void 0:h<s,[x,j]=u.useState({expandedElement:null,panes:[],resizing:!1});u.useEffect(()=>i.setRootElement(r),[i,r]),u.useEffect(()=>i.setRootWidth(h),[i,h]),u.useEffect(()=>i.subscribe(j),[i]),u.useEffect(()=>{p!==void 0&&(p&&a&&a(),!p&&o&&o())},[p,a,o]);const g=u.useMemo(()=>({collapse:i.collapse,collapsed:p,expand:i.expand,expandedElement:x.expandedElement,mount:i.mount,panes:x.panes,resize:i.resize,resizing:x.resizing}),[p,i,x.expandedElement,x.panes,x.resizing]);return e.jsx(Rt.Provider,{value:g,children:e.jsx(kt,{"data-ui":"PaneLayout",...l,"data-collapsed":p?"":void 0,"data-resizing":x.resizing?"":void 0,"data-mounted":h?"":void 0,ref:c,children:n})})}function Ns(t){const{documentId:n,documentType:s,flex:a}=t,{collapsed:o}=Me(),{closeInspector:l,inspector:i}=z(),{features:r}=J(),c=u.useCallback(()=>{i&&l(i.name)},[l,i]);if(o||!i)return null;const d=u.createElement(i.component,{onClose:c,documentId:n,documentType:s});return r.resizablePanes?e.jsx(Kt,{as:"aside","data-ui":"DocumentInspectorPanel",flex:a,maxWidth:Xt,minWidth:Ie,children:d}):e.jsx(C,{as:"aside","data-ui":"DocumentInspectorPanel",flex:a,children:d})}var Fs=Object.defineProperty,Hs=(t,n,s)=>n in t?Fs(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,ye=(t,n,s)=>(Hs(t,typeof n!="symbol"?n+"":n,s),s);class $ extends Error{constructor(n){let{message:s,context:a,helpId:o,cause:l}=n;super(s),ye(this,"cause"),ye(this,"context"),ye(this,"helpId"),this.context=a,this.helpId=o,this.cause=l}}const cn=new WeakMap;function me(t){const n=cn.get(t);if(n)return n;const s=Is();return cn.set(t,s),s}const ln=new WeakMap;function An(t,n){const s=ln.get(t)||new Map;if(s){const l=s.get(n);if(l)return l}const a=t[n];if(typeof a!="function")throw new Error("Expected property `".concat(n,"` to be a function but got ").concat(typeof a," instead."));const o=a.bind(t);return s.set(n,o),ln.set(t,s),o}const Vs=t=>!!t&&typeof(t==null?void 0:t.then)=="function",Us=t=>ne(t)?typeof t.serialize=="function":!1,Gs=t=>(n,s,a)=>{try{return t(n,s,a)}catch(o){throw o instanceof $?o:new $({message:typeof(o==null?void 0:o.message)=="string"?o.message:"",context:s,cause:o})}},Ks=t=>function(){return t(...arguments).pipe(Cs(1),Es())};function Bn(t){const n=Gs(Ks(t((s,a,o)=>{if(!s)throw new $({message:"Pane returned no child",context:a,helpId:"structure-item-returned-no-child"});return Vs(s)||ys(s)?vs(s).pipe(Ae(l=>n(l,a,o))):Us(s)?n(s.serialize(a),a,o):typeof s=="function"?n(s(a.id,a),a,o):H(s)})));return n}async function Xs(t){const n=new Map,a=Bn(c=>(d,h,p)=>{const x=d&&"".concat(me(d),"-").concat(h.path.join("__")),j=x&&n.get(x);if(j)return j;const g=c(d,h,p);return x&&n.set(x,g),g}),o=[[{id:"__edit__".concat(t.params.id),params:{...wn(t.params,["id"]),type:t.params.type},payload:t.payload}]];async function l(c){let{currentId:d,flatIndex:h,intent:p,params:x,parent:j,path:g,payload:y,unresolvedPane:P,levelIndex:m,structureContext:f}=c;var b;if(!P)return[];const{id:_,type:v,...I}=x,w=await zn(a(P,{id:d,splitIndex:0,parent:j,path:g,index:h,params:{},payload:void 0,structureContext:f},h));return w.type==="document"&&w.id===_?[{panes:[...g.slice(0,g.length-1).map(S=>[{id:S}]),[{id:_,params:I,payload:y}]],depthIndex:g.length,levelIndex:m}]:(b=w.canHandleIntent)!=null&&b.call(w,p,x,{pane:w,index:h})||w.type==="documentList"&&w.schemaTypeName===v&&w.options.filter==="_type == $type"?[{panes:[...g.map(S=>[{id:S}]),[{id:x.id,params:I,payload:y}]],depthIndex:g.length,levelIndex:m}]:w.type==="list"&&w.child&&w.items?(await Promise.all(w.items.map((S,k)=>S.type==="divider"?Promise.resolve([]):l({currentId:S._id||S.id,flatIndex:h+1,intent:p,params:x,parent:w,path:[...g,S.id],payload:y,unresolvedPane:typeof w.child=="function"?An(w,"child"):w.child,levelIndex:k,structureContext:f})))).flat():[]}const r=(await l({currentId:"root",flatIndex:0,levelIndex:0,intent:t.intent,params:t.params,parent:null,path:[],payload:t.payload,unresolvedPane:t.rootPaneNode,structureContext:t.structureContext})).sort((c,d)=>c.depthIndex===d.depthIndex?c.levelIndex-d.levelIndex:c.depthIndex-d.depthIndex)[0];return r?r.panes:o}const Ys=(t,n)=>{const s=t.replace(/^__edit__/,""),{params:a,payload:o,structureContext:{resolveDocumentNode:l}}=n,{type:i,template:r}=a;if(!i)throw new Error("Document type for document with ID ".concat(s," was not provided in the router params."));let c=l({schemaType:i,documentId:s});return c=c.id("editor").title("Editor"),r&&(c=c.initialValueTemplate(r,o)),c.serialize()};function $s(t){var n,s;return"contextHash(".concat(JSON.stringify({id:t.id,parentId:parent&&me(parent),path:t.path,index:t.index,splitIndex:t.splitIndex,serializeOptionsIndex:(n=t.serializeOptions)==null?void 0:n.index,serializeOptionsPath:(s=t.serializeOptions)==null?void 0:s.path}),")")}const dn=t=>{const n={type:t.type,id:t.routerPaneSibling.id,params:t.routerPaneSibling.params||{},payload:t.routerPaneSibling.payload||null,flatIndex:t.flatIndex,groupIndex:t.groupIndex,siblingIndex:t.siblingIndex,path:t.path,paneNode:t.type==="resolvedMeta"?me(t.paneNode):null};return"metaHash(".concat(JSON.stringify(n),")")};function re(t){let{unresolvedPane:n,flattenedRouterPanes:s,parent:a,path:o,resolvePane:l,structureContext:i}=t;const[r,...c]=s,d=c[0],h={id:r.routerPaneSibling.id,splitIndex:r.siblingIndex,parent:a,path:[...o,r.routerPaneSibling.id],index:r.flatIndex,params:r.routerPaneSibling.params||{},payload:r.routerPaneSibling.payload,structureContext:i};try{return l(n,h,r.flatIndex).pipe(Ae(p=>{const x={type:"resolvedMeta",...r,paneNode:p,path:h.path},j=c.map((y,P)=>({type:"loading",path:[...h.path,...c.slice(P).map((b,_)=>"[".concat(y.flatIndex+_,"]"))],paneNode:null,...y}));if(!c.length)return H([x]);let g;return d!=null&&d.routerPaneSibling.id.startsWith("__edit__")?g=re({unresolvedPane:Ys,flattenedRouterPanes:c,parent:a,path:h.path,resolvePane:l,structureContext:i}):r.groupIndex===(d==null?void 0:d.groupIndex)?g=re({unresolvedPane:n,flattenedRouterPanes:c,parent:a,path:o,resolvePane:l,structureContext:i}):g=re({unresolvedPane:typeof p.child=="function"?An(p,"child"):p.child,flattenedRouterPanes:c,parent:p,path:h.path,resolvePane:l,structureContext:i}),Cn(H([x,...j]),g.pipe(F(y=>[x,...y])))}))}catch(p){if(p instanceof $&&(p.context&&console.warn("Pane resolution error at index ".concat(p.context.index).concat(p.context.splitIndex>0?" for split pane index ".concat(p.context.splitIndex):"",": ").concat(p.message).concat(p.helpId?" - see ".concat(Rn(p.helpId)):""),p),p.helpId==="structure-item-returned-no-child"))return H([]);throw p}}function Js(t){let{routerPanesStream:n,rootPaneNode:s,initialCacheState:a={cacheKeysByFlatIndex:[],flattenedRouterPanes:[],resolvedPaneCache:new Map,resolvePane:()=>_s},structureContext:o}=t;return n.pipe(F(i=>[[{id:"root"}],...i]),F(i=>i.flatMap((c,d)=>c.map((h,p)=>({routerPaneSibling:h,groupIndex:d,siblingIndex:p}))).map((c,d)=>({...c,flatIndex:d}))),Yt([]),Rs(),F(i=>{let[r,c]=i;for(let d=0;d<c.length;d++){const h=r[d],p=c[d];if(!ve(h,p))return{flattenedRouterPanes:c,diffIndex:d}}return{flattenedRouterPanes:c,diffIndex:c.length}}),Ve((i,r)=>{const{cacheKeysByFlatIndex:c,resolvedPaneCache:d}=i,{flattenedRouterPanes:h,diffIndex:p}=r,x=c.slice(0,p+1),j=c.slice(p+1),g=new Set(x.flatMap(m=>Array.from(m))),y=j.flatMap(m=>Array.from(m)).filter(m=>!g.has(m));for(const m of y)d.delete(m);return{flattenedRouterPanes:h,cacheKeysByFlatIndex:c,resolvedPaneCache:d,resolvePane:Bn(m=>(f,b,_)=>{const v=f&&"".concat(me(f),"-").concat($s(b)),I=v&&d.get(v);if(I)return I;const E=m(f,b,_);if(!v)return E;const w=c[_]||new Set;return w.add(v),c[_]=w,d.set(v,E),E})}},a),Ae(i=>{let{flattenedRouterPanes:r,resolvePane:c}=i;return re({unresolvedPane:s,flattenedRouterPanes:r,parent:null,path:[],resolvePane:c,structureContext:o})})).pipe(Ve((i,r)=>r.map((c,d)=>{const h=i[d];return!h||c.type!=="loading"?c:h.routerPaneSibling.id===c.routerPaneSibling.id?h:c}),[]),$t((i,r)=>{if(i.length!==r.length)return!1;for(let c=0;c<r.length;c++){const d=i[c],h=r[c];if(dn(d)!==dn(h))return!1}return!0}))}function qs(){const t=u.useMemo(()=>new Jt(1),[]),n=u.useMemo(()=>t.asObservable().pipe(F(a=>(a==null?void 0:a.panes)||[])),[t]),{state:s}=Te();return u.useEffect(()=>{t.next(s)},[s,t]),n}function Zs(){const[t,n]=u.useState();if(t)throw t;const{structureContext:s,rootPaneNode:a}=J(),[o,l]=u.useState({paneDataItems:[],resolvedPanes:[],routerPanes:[]}),i=qs();return u.useEffect(()=>{const c=Js({rootPaneNode:a,routerPanesStream:i,structureContext:s}).pipe(F(d=>{const h=d.reduce((j,g)=>{const y=j[g.groupIndex]||[];return y[g.siblingIndex]=g.routerPaneSibling,j[g.groupIndex]=y,j},[]),p=h.length,x=d.map(j=>{var g;const{groupIndex:y,flatIndex:P,siblingIndex:m,routerPaneSibling:f,path:b}=j,_=f.id,v=h[y+1];return{active:y===p-2,childItemId:(g=v==null?void 0:v[0].id)!=null?g:null,index:P,itemId:f.id,groupIndex:y,key:"".concat(j.type==="loading"?"unknown":j.paneNode.id,"-").concat(_,"-").concat(m),pane:j.type==="loading"?Se:j.paneNode,params:f.params||{},path:b.join(";"),payload:f.payload,selected:P===d.length-1,siblingIndex:m}});return{paneDataItems:x,routerPanes:h,resolvedPanes:x.map(j=>j.pane)}})).subscribe({next:d=>l(d),error:d=>n(d)});return()=>c.unsubscribe()},[a,i,s]),o}async function Qs(t,n,s){if(n&&s)return{id:n,type:s};if(!n&&s)return{id:qt(),type:s};if(n&&!s){const a=await zn(t.resolveTypeForDocument(n));return{id:n,type:a}}throw new $({message:"Neither document `id` or `type` was provided when trying to resolve intent."})}const eo={},no=u.memo(function(){const{navigate:n}=Te(),s=Re(u.useCallback(c=>{const d=typeof c.intent=="string"?c.intent:void 0;return d?{intent:d,params:ne(c.params)?c.params:eo,payload:c.payload}:void 0},[])),{rootPaneNode:a,structureContext:o}=J(),l=mn(),[i,r]=u.useState(null);if(i)throw i;return u.useEffect(()=>{if(s){const{intent:c,params:d,payload:h}=s;let p=!1;async function x(){const{id:j,type:g}=await Qs(l,typeof d.id=="string"?d.id:void 0,typeof d.type=="string"?d.type:void 0);if(p)return;const y=await Xs({intent:c,params:{...d,id:j,type:g},payload:h,rootPaneNode:a,structureContext:o});p||n({panes:y},{replace:!0})}return x().catch(r),()=>{p=!0}}},[l,s,n,a,o]),null}),to=A.span(Ke||(Ke=B([`
  &:not(:last-child)::after {
    content: ' ➝ ';
    opacity: 0.5;
  }
`])));function so(t){return t.replace(/\(\.\.\.\)\./g,`(...)
  .`).replace(/__WEBPACK_IMPORTED_MODULE_\d+_+/g,"").replace(/___default\./g,".").replace(new RegExp(" \\(https?:\\/\\/".concat(window.location.host),"g")," (")}function oo(t){let{error:n}=t;if(!(n instanceof $))throw n;const{cause:s}=n,a=(s==null?void 0:s.stack)||n.stack,o=a&&!(s instanceof je)&&!n.message.includes("Module build failed:"),l=s instanceof je?s.path:[],i=s instanceof je&&s.helpId||n.helpId,r=u.useCallback(()=>{window.location.reload()},[]);return e.jsx(V,{height:"fill",overflow:"auto",padding:4,sizing:"border",tone:"critical",children:e.jsxs(te,{children:[e.jsx(Zt,{as:"h2",children:"Encountered an error while reading structure"}),e.jsxs(V,{marginTop:4,padding:4,radius:2,overflow:"auto",shadow:1,tone:"inherit",children:[l.length>0&&e.jsxs(N,{space:2,children:[e.jsx(Ue,{children:"Structure path"}),e.jsx(Ce,{children:l.slice(1).map((c,d)=>e.jsx(to,{children:c},"".concat(c,"-").concat(d)))})]}),e.jsxs(N,{marginTop:4,space:2,children:[e.jsx(Ue,{children:"Error"}),e.jsx(Ce,{children:o?so(a):n.message})]}),i&&e.jsx(C,{marginTop:4,children:e.jsx(D,{children:e.jsx("a",{href:Rn(i),rel:"noopener noreferrer",target:"_blank",children:"View documentation"})})}),e.jsx(C,{marginTop:4,children:e.jsx(W,{text:"Reload",icon:jn,tone:"primary",onClick:r})})]})]})})}function ao(t){const{isSelected:n,pane:s,paneKey:a}=t,o=ne(s)&&s.type||null;return e.jsxs(le,{id:a,selected:n,children:[e.jsx(Oe,{title:"Unknown pane type"}),e.jsx(de,{children:e.jsx(C,{padding:4,children:typeof o=="string"?e.jsxs(D,{as:"p",muted:!0,children:["Structure item of type ",e.jsx("code",{children:o})," is not a known entity."]}):e.jsxs(D,{as:"p",muted:!0,children:["Structure item is missing required ",e.jsx("code",{children:"type"})," property."]})})})]})}function io(t){const n=[{ms:300,message:"Loading…"},{ms:5e3,message:"Still loading…"}],s=H(null);return Qt(...n.map(a=>{let{ms:o,message:l}=a;return s.pipe(es(l),ns(o))}))}const ro="Loading…",co=A(O)(Xe||(Xe=B([`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`]))),ee=u.memo(t=>{const{delay:n=300,flex:s,message:a=io,minWidth:o,paneKey:l,path:i,selected:r,title:c,tone:d}=t,h=u.useMemo(()=>typeof a=="function"?a(i?i.split(";"):[]):a,[a,i]),[p,x]=u.useState(()=>typeof h=="string"?h:ro);u.useEffect(()=>{if(typeof h!="object"||typeof h.subscribe=="function")return;const f=h.subscribe(x);return()=>f.unsubscribe()},[h]);const[j,g]=u.useState(null),[y,P]=u.useState(!1);u.useEffect(()=>{if(j)return Jn(()=>P(!0))},[j]);const m=e.jsxs(co,{align:"center","data-mounted":y?"":void 0,direction:"column",height:"fill",justify:"center",ref:g,children:[e.jsx(In,{muted:!0}),(c||p)&&e.jsx(C,{marginTop:3,children:e.jsx(D,{align:"center",muted:!0,size:1,children:c||p})})]});return e.jsx(le,{flex:s,id:l,minWidth:o,selected:r,tone:d,children:e.jsx(de,{children:m})})});ee.displayName="LoadingPane";const lo={component:u.lazy(()=>ie(()=>import("./index-09fce04c.328e5d60.js"),["_app/immutable/chunks/index-09fce04c.328e5d60.js","_app/immutable/chunks/4.0538efa9.js","_app/immutable/chunks/scheduler.65a4905e.js","_app/immutable/chunks/index.60f6f871.js","_app/immutable/chunks/preload-helper.cf010ec4.js","_app/immutable/assets/4.6ba77234.css"])),document:u.lazy(()=>ie(()=>import("./index-b976d996.0a0919e9.js"),["_app/immutable/chunks/index-b976d996.0a0919e9.js","_app/immutable/chunks/4.0538efa9.js","_app/immutable/chunks/scheduler.65a4905e.js","_app/immutable/chunks/index.60f6f871.js","_app/immutable/chunks/preload-helper.cf010ec4.js","_app/immutable/assets/4.6ba77234.css"])),documentList:u.lazy(()=>ie(()=>import("./index-3e777261.dd7a327b.js"),["_app/immutable/chunks/index-3e777261.dd7a327b.js","_app/immutable/chunks/4.0538efa9.js","_app/immutable/chunks/scheduler.65a4905e.js","_app/immutable/chunks/index.60f6f871.js","_app/immutable/chunks/preload-helper.cf010ec4.js","_app/immutable/assets/4.6ba77234.css","_app/immutable/chunks/PaneItem-51d63fac.041cda05.js"])),list:u.lazy(()=>ie(()=>import("./index-5af25cb2.73851952.js"),["_app/immutable/chunks/index-5af25cb2.73851952.js","_app/immutable/chunks/4.0538efa9.js","_app/immutable/chunks/scheduler.65a4905e.js","_app/immutable/chunks/index.60f6f871.js","_app/immutable/chunks/preload-helper.cf010ec4.js","_app/immutable/assets/4.6ba77234.css","_app/immutable/chunks/PaneItem-51d63fac.041cda05.js"]))},uo=u.memo(function(n){const{active:s,childItemId:a,groupIndex:o,index:l,itemId:i,pane:r,paneKey:c,params:d,payload:h,path:p,selected:x,siblingIndex:j}=n,g=lo[r.type]||ao;return e.jsx(Os,{flatIndex:l,index:o,params:d,payload:h,siblingIndex:j,children:e.jsx(u.Suspense,{fallback:e.jsx(ee,{paneKey:c,path:p,selected:x}),children:e.jsx(g,{childItemId:a||"",index:l,itemId:i,isActive:s,isSelected:x,paneKey:c,pane:r})})})},(t,n)=>{let{params:s={},payload:a=null,...o}=t,{params:l={},payload:i=null,...r}=n;if(!ve(s,l)||!ve(a,i))return!1;const c=new Set([...Object.keys(o),...Object.keys(r)]);for(const d of c)if(o[d]!==r[d])return!1;return!0});function Wn(t){const{children:n,currentMinWidth:s,flex:a,minWidth:o,paneKey:l,title:i="Error",tone:r="critical"}=t;return e.jsxs(le,{currentMinWidth:s,flex:a,id:l,minWidth:o,tone:r,children:[e.jsx(Oe,{title:i}),e.jsx(de,{overflow:"auto",children:e.jsx(C,{paddingX:4,paddingY:5,children:n})})]})}function po(t){return t==="delete"?`An error occurred while attempting to delete this document.
      This usually means that there are other documents that refers to it.`:t==="unpublish"?`An error occurred while attempting to unpublish this document.
      This usually means that there are other documents that refers to it.`:"An error occurred during ".concat(t)}function ho(t){return t==="publish"?"The document was published":t==="unpublish"?"The document was unpublished. A draft has been created from the latest published version.":t==="discardChanges"?"All changes since last publish has now been discarded. The discarded draft can still be recovered from history":t==="delete"?"The document was successfully deleted":"Successfully performed ".concat(t," on document")}const fo=["patch","commit"],mo=u.memo(function(){const{push:n}=ke(),{documentId:s,documentType:a}=z(),o=qn(s,a),l=u.useRef(o);return u.useEffect(()=>{!o||o===l.current||(o.type==="error"&&n({closable:!0,duration:3e4,status:"error",title:po(o.op),description:e.jsxs("details",{children:[e.jsx("summary",{children:"Details"}),o.error.message]})}),o.type==="success"&&!fo.includes(o.op)&&n({closable:!0,status:"success",title:ho(o.op)}),l.current=o)},[o,n]),null});function xo(t,n,s){const a=Zn(),[o,l]=u.useState(s),i=u.useMemo(()=>a.forNamespace("desk-tool"),[a]),r=u.useMemo(()=>t?i.forNamespace(t).forKey(n):i.forKey(n),[i,t,n]);u.useEffect(()=>{const d=r.listen(s).subscribe({next:l});return()=>d==null?void 0:d.unsubscribe()},[s,n,t,r]);const c=u.useCallback(d=>{l(d),r.set(d)},[r]);return u.useMemo(()=>[o,c],[c,o])}const K={id:"parsed",title:"Parsed"},X={id:"raw",title:"Raw JSON"},go=[K,X],ce=Ds(1e3);function Nn(t,n){const s=ce.get(t);return s===void 0?(ce.set(t,Array.isArray(n)||ne(n)),Nn(t,n)):s}function jo(t){const{path:n}=t,s=ce.get(n);s!==void 0&&ce.set(n,!s)}function Fn(t){const n=window.getSelection();if(n){const s=document.createRange();n.removeAllRanges(),s.selectNodeContents(t),n.addRange(s)}}function un(t){Fn(t.currentTarget)}function bo(t){t.keyCode===65&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),Fn(t.currentTarget))}function yo(t){return ne(t)&&Ge(t._id)&&Ge(t._type)}const vo=A.div(t=>{let{theme:n}=t;const{color:s,fonts:a,space:o}=n.sanity;return xn(Ye||(Ye=B([`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: `,`;
      font-size: `,`px;
      line-height: `,`px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: `,`;
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: `,`;
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - `,` + 3px);
      font-size: `,`px;
      line-height: `,`px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: `,`px;
      line-height: `,`px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: `,`;
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: `,`;
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: `,`;
    }

    & .json-inspector .json-inspector__value_string {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_boolean {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_number {
      color: `,`;
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `])),a.code.family,a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,Q(o[4]),Q(o[3]),Q(o[4]),a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,Q(o[4]/2),s.syntax.property,s.syntax.constant,Q(o[3]),s.syntax.string,s.syntax.boolean,s.syntax.number)});function _o(t){const{onChange:n,query:s}=t,a=u.useCallback(o=>n(o.target.value),[n]);return e.jsx(Ps,{icon:Ss,onChange:a,placeholder:"Search",radius:2,value:s||""})}function Po(t){const{value:n}=t,{onInspectClose:s,paneKey:a}=z(),o="".concat(a,"_inspect_"),[l,i]=xo("desk-tool","inspect-view-preferred-view-mode-".concat(a),"parsed"),r=go.find(h=>h.id===l),c=u.useCallback(()=>{i(K.id)},[i]),d=u.useCallback(()=>{i(X.id)},[i]);return e.jsx(Be,{id:"".concat(o,"dialog"),header:yo(n)?e.jsxs(e.Fragment,{children:["Inspecting"," ",e.jsx("em",{children:e.jsx(ts,{document:n})})]}):e.jsx("em",{children:"No value"}),onClose:s,onClickOutside:s,width:3,children:e.jsxs(O,{direction:"column",height:"fill",children:[e.jsx(V,{padding:3,shadow:1,style:{position:"sticky",bottom:0,zIndex:3},children:e.jsxs(En,{space:1,children:[e.jsx(we,{"aria-controls":"".concat(o,"tabpanel"),fontSize:1,id:"".concat(o,"tab-").concat(K.id),label:K.title,onClick:c,selected:r===K}),e.jsx(we,{"aria-controls":"".concat(o,"tabpanel"),fontSize:1,id:"".concat(o,"tab-").concat(X.id),label:X.title,onClick:d,selected:r===X})]})}),e.jsxs(ss,{"aria-labelledby":"".concat(o,"tab-").concat(l),flex:1,id:"".concat(o,"tabpanel"),overflow:"auto",padding:4,style:{outline:"none"},children:[r===K&&e.jsx(vo,{children:e.jsx(Ts,{data:n,isExpanded:Nn,onClick:jo,search:_o})}),r===X&&e.jsx(Ce,{language:"json",tabIndex:0,onKeyDown:bo,onDoubleClick:un,onFocus:un,children:JSON.stringify(n,null,2)})]})]})})}const So=A(V)($e||($e=B([`
  position: relative;
  z-index: 50;
`]))),pn=A(D)(Je||(Je=B([`
  & > * {
    overflow: hidden;
    overflow: clip;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
`]))),Hn=u.memo(()=>{var t,n,s,a,o,l;const i=Qn(),{params:r,groupIndex:c,routerPanesState:d,replaceCurrent:h,BackLink:p}=ue(),x=(t=d[c])==null?void 0:t[0].id,j=d[c-1],g=j==null?void 0:j[0],y=g==null?void 0:g.id,P=!!((n=g==null?void 0:g.params)!=null&&n.rev),m=u.useMemo(()=>(r==null?void 0:r.parentRefPath)&&_e(r.parentRefPath)||null,[r==null?void 0:r.parentRefPath]),f=et(()=>{const v=m==null?void 0:m[0];if(!y||!v||!m)return H({loading:!1});const I=Mt(y),E=_e(v),w=E.findIndex(S=>typeof S=="object"&&"_key"in S);return Cn(H({loading:!0}),i.unstable_observePathsDocumentPair(I,w===-1?E:E.slice(0,w)).pipe(Ot(750),F(S=>{let{draft:k,published:M}=S;var R;return{loading:!1,result:{availability:{draft:k.availability,published:M.availability},refValue:(R=Lt(k.snapshot||M.snapshot,m))==null?void 0:R._ref}}})))},[i,y,m],{loading:!0}),b=u.useCallback(()=>{var v;f.loading||(v=f.result)!=null&&v.refValue&&h({id:f.result.refValue,params:r})},[f.loading,f.result,h,r]);return!y||!m||P||f.loading||!((s=f.result)!=null&&s.availability.draft.available)&&!((a=f.result)!=null&&a.availability.published.available)||((o=f.result)==null?void 0:o.refValue)===x?null:e.jsx(So,{shadow:1,tone:"caution","data-testid":"reference-changed-banner",children:e.jsx(te,{paddingX:4,paddingY:2,sizing:"border",width:1,children:e.jsxs(O,{align:"center",children:[e.jsx(D,{size:1,children:e.jsx(gn,{})}),(l=f.result)!=null&&l.refValue?e.jsxs(e.Fragment,{children:[e.jsx(C,{flex:1,marginLeft:3,children:e.jsx(pn,{title:"This reference has changed since you opened it.",size:1,children:"This reference has changed since you opened it."})}),e.jsx(C,{marginLeft:3,children:e.jsx(W,{onClick:b,icon:jn,fontSize:1,mode:"ghost",padding:2,space:2,text:"Reload reference"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{flex:1,marginLeft:3,children:e.jsx(pn,{title:"This reference has been removed since you opened it.",size:1,children:"This reference has been removed since you opened it."})}),e.jsx(C,{marginLeft:3,children:e.jsx(W,{as:p,icon:Pe,fontSize:1,mode:"ghost",padding:2,space:2,text:"Close reference"})})]})]})})})});Hn.displayName="ReferenceChangedBanner";const wo=A(V)(qe||(qe=B([`
  position: relative;
  z-index: 50;
`])));function Io(t){let{granted:n,requiredPermission:s}=t;var a,o;const l=os(),i=((a=l==null?void 0:l.roles)==null?void 0:a.length)!==1,r=Co(((o=l==null?void 0:l.roles)==null?void 0:o.map(c=>e.jsx("code",{children:c.title},c.name)))||[],", ");return n?null:e.jsx(wo,{"data-testid":"permission-check-banner",shadow:1,tone:"transparent",children:e.jsx(te,{paddingX:4,paddingY:3,sizing:"border",width:1,children:e.jsxs(O,{align:"flex-start",children:[e.jsx(D,{size:1,children:e.jsx(as,{})}),e.jsx(C,{flex:1,marginLeft:3,children:e.jsxs(D,{size:1,children:["Your role",i&&"s"," ",r," ",i?"do":"does"," not have permissions to"," ",s," this document."]})})]})})})}function Co(t,n){return t.reduce((s,a)=>s===null?[a]:s.concat([n,a]),null)}function Eo(t){const n=u.useRef();return u.useEffect(()=>{n.current=t},[t]),n.current}const Do=1e3*60*60*24*24;function To(t){const n=ke(),s=Eo(t.enabled);u.useEffect(()=>{!s&&t.enabled&&n.push({...t,duration:Do}),s&&!t.enabled&&n.push({...t,duration:.01})},[t,n,s])}const Ro=t=>t.preventDefault();function ko(t){var n;const{hidden:s,margins:a}=t,{collapsedFieldSets:o,collapsedPaths:l,displayed:i,editState:r,documentId:c,documentType:d,fieldActions:h,onChange:p,validation:x,ready:j,formState:g,onFocus:y,onBlur:P,onSetCollapsedPath:m,onPathOpen:f,onSetCollapsedFieldSet:b,onSetActiveFieldGroup:_}=z(),v=mn(),I=is(c),E=u.useMemo(()=>rs(),[]),w=(n=r==null?void 0:r.transactionSyncLock)==null?void 0:n.enabled;To({id:"sync-lock-".concat(c),status:"warning",enabled:w,title:"Syncing document…",description:"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds"}),u.useEffect(()=>{const M=v.pair.documentEvents(c,d).pipe(cs(R=>{R.type==="mutation"&&E.publish(Mo(R)),R.type==="rebase"&&E.publish(Oo(R))})).subscribe();return()=>{M.unsubscribe()}},[c,v,d,E]);const S=!!(i!=null&&i._rev);u.useEffect(()=>{S&&E.publish({type:"mutation",patches:[],snapshot:i})},[S]);const k=u.useRef(null);return u.useEffect(()=>{j&&!(g!=null&&g.focusPath.length)&&ls(k.current)},[j]),e.jsx(te,{hidden:s,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:e.jsx(ds,{margins:a,children:e.jsx(C,{as:"form",onSubmit:Ro,ref:k,children:j?g===null?e.jsx(C,{padding:2,children:e.jsx(D,{children:"This form is hidden"})}):e.jsx(us,{__internal_fieldActions:h,__internal_patchChannel:E,collapsedFieldSets:o,collapsedPaths:l,focusPath:g.focusPath,changed:g.changed,focused:g.focused,groups:g.groups,id:"root",members:g.members,onChange:p,onFieldGroupSelect:_,onPathBlur:P,onPathFocus:y,onPathOpen:f,onSetFieldSetCollapsed:b,onSetPathCollapsed:m,presence:I,readOnly:g.readOnly,schemaType:g.schemaType,validation:x,value:g.value}):e.jsx(ps,{ms:300,children:e.jsxs(O,{align:"center",direction:"column",height:"fill",justify:"center",children:[e.jsx(In,{muted:!0}),e.jsx(C,{marginTop:3,children:e.jsx(D,{align:"center",muted:!0,size:1,children:"Loading document"})})]})})})})})}function Mo(t){const n=t.mutations.map(s=>s.patch).filter(Boolean);return{type:"mutation",snapshot:t.document,patches:Ee(t.origin,n)}}function Oo(t){const n=t.remoteMutations.map(a=>a.patch).filter(Boolean),s=t.localMutations.map(a=>a.patch).filter(Boolean);return{type:"rebase",snapshot:t.document,patches:Ee("remote",n).concat(Ee("local",s))}}function Lo(){const{activeViewId:t,paneKey:n,views:s}=z(),a="".concat(n,"tabpanel");return e.jsx(En,{space:1,children:s.map((o,l)=>{var i;return e.jsx(zo,{icon:o.icon,id:"".concat(n,"tab-").concat(o.id),isActive:t===o.id,label:e.jsx(e.Fragment,{children:o.title}),tabPanelId:a,viewId:l===0?null:(i=o.id)!=null?i:null},o.id)})})}function zo(t){const{isActive:n,tabPanelId:s,viewId:a}=t,{ready:o}=z(),{setView:l}=ue(),i=u.useCallback(()=>l(a),[l,a]);return e.jsx(we,{...t,"aria-controls":s,disabled:!o,fontSize:1,selected:n,onClick:i})}function Ao(){const{connectionState:t,schemaType:n,title:s,value:a}=z(),o=!!a&&t==="connected",{error:l,value:i}=zt({enabled:o,schemaType:n,value:a});return t!=="connected"?e.jsx(e.Fragment,{}):s?e.jsx(e.Fragment,{children:s}):a?l?e.jsxs(e.Fragment,{children:["Error: ",l.message]}):e.jsx(e.Fragment,{children:(i==null?void 0:i.title)||e.jsx("span",{style:{color:"var(--card-muted-fg-color)"},children:"Untitled"})}):e.jsxs(e.Fragment,{children:["New ",(n==null?void 0:n.title)||(n==null?void 0:n.name)]})}const Bo=u.memo(u.forwardRef(function(n,s){const{onMenuAction:a,onPaneClose:o,onPaneSplit:l,menuItems:i,menuItemGroups:r,schemaType:c,timelineStore:d,ready:h,views:p,unstable_languageFilter:x}=z(),{features:j}=J(),{index:g,BackLink:y,hasGroupSiblings:P}=ue(),{actions:m}=nt(),f=u.useMemo(()=>tt({actionHandler:a,fieldActions:m,menuItems:i,menuItemGroups:r}),[a,m,r,i]),b=u.useMemo(()=>f.filter(st),[f]),_=u.useMemo(()=>f.filter(ot),[f]),v=p.length>1,I=pe(d,T=>T.revTime),{collapsed:E,isLast:w}=Me(),S=w&&!E?-1:0,k=j.splitViews&&l&&p.length>1,M=k&&P,R=!M&&!j.backButton;return e.jsx(Oe,{ref:s,loading:!h,title:e.jsx(Ao,{}),tabs:v&&e.jsx(Lo,{}),tabIndex:S,backButton:j.backButton&&g>0&&e.jsx(W,{as:y,"data-as":"a",icon:at,mode:"bleed",padding:2}),subActions:e.jsx(it,{chunk:I,mode:"rev",placement:"bottom-end"}),actions:e.jsxs(O,{align:"center",gap:1,children:[x.length>0&&e.jsx(e.Fragment,{children:x.map((T,L)=>u.createElement(T,{key:"language-filter-".concat(L),schemaType:c}))}),b.map(T=>e.jsx(rt,{node:T},T.key)),e.jsx(ct,{nodes:_},"context-menu"),k&&e.jsx(q,{content:e.jsx(D,{size:1,style:{whiteSpace:"nowrap"},children:"Split pane right"}),padding:2,placement:"bottom",portal:!0,children:e.jsx(W,{"aria-label":"Split pane right",icon:lt,mode:"bleed",onClick:l},"split-pane-button")}),M&&e.jsx(W,{icon:Pe,mode:"bleed",onClick:o,title:"Close split pane"},"close-view-button"),R&&e.jsx(W,{icon:Pe,mode:"bleed",title:"Close pane group",as:y},"close-view-button")]})})})),Wo=A(C)({position:"relative"}),No=A(dt)(t=>{let{$disabled:n}=t;return n?{height:"100%"}:xn(Ze||(Ze=B([`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `])))}),Fo=function(n){const{footerHeight:s,isInspectOpen:a,rootElement:o,setDocumentPanelPortalElement:l}=n,{activeViewId:i,displayed:r,documentId:c,editState:d,inspector:h,value:p,views:x,ready:j,schemaType:g,permissions:y,isPermissionsLoading:P}=z(),{collapsed:m}=vn(),{collapsed:f}=Me(),b=Dn(),{features:_}=J(),[v,I]=u.useState(null),E=he(v),w=u.useRef(null),[S,k]=u.useState(null),M=p._createdAt?"update":"create",R=u.useMemo(()=>x.find(ae=>ae.id===i)||x[0]||{type:"form"},[i,x]),T=_.splitPanes&&w.current||b.element,L=u.useMemo(()=>m?[(E==null?void 0:E.height)||0,0,s?s+2:2,0]:[0,0,2,0],[m,s,E]),U=R.type!=="form",Z=u.useMemo(()=>R.type==="component"&&R.component&&u.createElement(R.component,{document:{draft:(d==null?void 0:d.draft)||null,displayed:r||p,historical:r,published:(d==null?void 0:d.published)||null},documentId:c,options:R.options,schemaType:g}),[R,r,c,d==null?void 0:d.draft,d==null?void 0:d.published,g,p]);u.useEffect(()=>{S!=null&&S.scrollTo&&S.scrollTo(0,0)},[c,S]),u.useEffect(()=>{T&&l(T)},[T,l]);const xe=u.useMemo(()=>a?e.jsx(Po,{value:r||p}):null,[a,r,p]),oe=!!(!f&&h);return e.jsxs(e.Fragment,{children:[e.jsx(Bo,{ref:I}),e.jsx(de,{children:e.jsxs(O,{height:"fill",children:[(_.resizablePanes||!oe)&&e.jsx(Wo,{flex:2,overflow:"hidden",children:e.jsx(fe,{element:T,__unstable_elements:{documentScrollElement:S},children:e.jsx(He,{element:S,children:e.jsxs(At,{scrollElement:S,children:[R.type==="form"&&!P&&j&&e.jsxs(e.Fragment,{children:[e.jsx(Io,{granted:!!(y!=null&&y.granted),requiredPermission:M}),e.jsx(Hn,{})]}),e.jsxs(No,{$disabled:m||!1,"data-testid":"document-panel-scroller",ref:k,children:[e.jsx(ko,{hidden:U,margins:L},c+(j?"_ready":"_pending")),Z]}),xe,e.jsx("div",{"data-testid":"document-panel-portal",ref:w})]})})})}),oe&&e.jsx(He,{element:o,children:e.jsx(Ns,{documentId:c,documentType:g.name,flex:1})})]})})]})},Vn=["left","bottom"],Ho={small:0,medium:1,large:2,full:"auto"};function Vo(t){const{dialog:n,referenceElement:s}=t;return e.jsx(kn,{content:e.jsx(Uo,{dialog:n}),fallbackPlacements:Vn,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:s})}function Uo(t){const{dialog:n}=t,{cancelButtonIcon:s,cancelButtonText:a,confirmButtonIcon:o,confirmButtonText:l,message:i,onCancel:r,onConfirm:c,tone:d}=n,{isTopLayer:h}=Mn(),[p,x]=u.useState(null),j=u.useCallback(()=>{h&&r()},[h,r]),g=u.useCallback(y=>{y.key==="Escape"&&h&&r()},[h,r]);return On(j,[p]),Ln(g),e.jsxs(O,{direction:"column",ref:x,style:{minWidth:320-16,maxWidth:400},children:[e.jsx(C,{flex:1,overflow:"auto",padding:4,children:e.jsx(D,{children:i})}),e.jsx(C,{paddingX:4,paddingY:3,style:{borderTop:"1px solid var(--card-border-color)"},children:e.jsxs(ws,{columns:2,gap:2,children:[e.jsx(W,{icon:s,onClick:r,mode:"ghost",text:a||"Cancel"}),e.jsx(W,{icon:o,onClick:c,text:l||"Confirm",tone:d})]})})]})}function Go(t){const{dialog:n}=t,s=u.useId(),a=n.footer&&e.jsx(C,{paddingX:4,paddingY:3,children:n.footer});return e.jsx(ze,{zOffset:"fullscreen",children:e.jsx(Be,{__unstable_hideCloseButton:n.showCloseButton===!1,footer:a,header:n.header,id:s,onClose:n.onClose,onClickOutside:n.onClose,width:n.width===void 0?1:Ho[n.width],children:e.jsx(C,{padding:4,children:n.content})})})}function Ko(t){const{dialog:n,referenceElement:s}=t;return e.jsx(kn,{content:e.jsx(Xo,{dialog:n}),fallbackPlacements:Vn,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:s})}function Xo(t){const{dialog:n}=t,{content:s,onClose:a}=n,{isTopLayer:o}=Mn(),[l,i]=u.useState(null),r=u.useCallback(()=>{o&&a()},[o,a]),c=u.useCallback(d=>{d.key==="Escape"&&o&&a()},[o,a]);return On(r,[l]),Ln(c),e.jsx("div",{ref:i,children:s})}function hn(t){const{children:n}=t,{element:s,elements:a}=Dn(),o=(a==null?void 0:a[_n])||s;return e.jsx(fe,{element:o,children:n})}function Ne(t){const{dialog:n,referenceElement:s=null}=t,a=u.useId();if(n.type==="confirm")return e.jsx(Vo,{dialog:n,referenceElement:s});if(n.type==="popover")return e.jsx(Ko,{dialog:n,referenceElement:s});if(n.type==="dialog"||!n.type)return e.jsx(hn,{children:e.jsx(Go,{dialog:n})});if(n.type==="custom")return e.jsx(hn,{children:n==null?void 0:n.component});const o=n;return console.warn("Unsupported modal type ".concat(o.type)),e.jsx(Be,{id:a,onClose:o.onClose,onClickOutside:o.onClose,width:2,children:e.jsx(C,{padding:4,children:o.content||e.jsxs(e.Fragment,{children:["Unexpected modal type (",e.jsx("code",{children:o.type}),")"]})})})}function Yo(t){const{actionStates:n,disabled:s}=t,a=u.useId(),o=u.useRef(null),[l,i]=u.useState(-1),[r,c]=u.useState(null),d=u.useCallback(x=>{i(x)},[]),h=u.useMemo(()=>({placement:"top-end",portal:!0,preventOverflow:!0}),[]),p=n[l];return e.jsxs(e.Fragment,{children:[e.jsx(hs,{id:"".concat(a,"-action-menu"),button:e.jsx(W,{"data-testid":"action-menu-button","aria-label":"Open document actions",disabled:s,icon:fs,mode:"ghost",ref:o}),menu:e.jsx(ms,{padding:1,children:n.map((x,j)=>e.jsx($o,{actionState:x,disabled:s,index:j,onAction:d},j))}),popover:h,ref:c}),p&&p.dialog&&e.jsx(ze,{zOffset:"paneFooter",children:e.jsx(Ne,{dialog:p.dialog,referenceElement:r})})]})}function $o(t){const{actionState:n,disabled:s,index:a,onAction:o}=t,{onHandle:l}=n,i=u.useCallback(()=>{o(a),l&&l()},[a,o,l]),r=n.title&&e.jsx(C,{padding:2,children:e.jsx(D,{size:1,children:n.title})});return e.jsx(xs,{"data-testid":"action-".concat(n.label.replace(" ","")),disabled:s||!!n.disabled,onClick:i,padding:0,tone:n.tone,children:e.jsx(q,{content:r,disabled:!r,fallbackPlacements:["left","bottom"],placement:"top",portal:!0,children:e.jsxs(O,{align:"center",paddingX:3,children:[e.jsxs(O,{flex:1,paddingY:3,children:[n.icon&&e.jsx(C,{marginRight:3,children:e.jsxs(D,{children:[u.isValidElement(n.icon)&&n.icon,gs.isValidElementType(n.icon)&&u.createElement(n.icon)]})}),e.jsx(D,{children:n.label})]}),n.shortcut&&e.jsx(C,{marginLeft:3,children:e.jsx(Tn,{keys:String(n.shortcut).split("+").map(c=>c.slice(0,1).toUpperCase()+c.slice(1))})})]})})})}function Un(t){const{disabled:n,showMenu:s,states:a}=t,[o,...l]=a,[i,r]=u.useState(null),c=u.useMemo(()=>!o||!o.title&&!o.shortcut?null:e.jsxs(O,{padding:2,style:{maxWidth:300},align:"center",children:[e.jsx(D,{size:1,children:o.title}),o.shortcut&&e.jsx(C,{marginLeft:o.title?2:0,children:e.jsx(Tn,{keys:String(o.shortcut).split("+").map(d=>d.slice(0,1).toUpperCase()+d.slice(1).toLowerCase())})})]}),[o]);return e.jsxs(O,{children:[o&&e.jsx(Bt,{zOffset:200,children:e.jsx(q,{disabled:!c,content:c,portal:!0,placement:"top",children:e.jsx(N,{flex:1,children:e.jsx(W,{"data-testid":"action-".concat(o.label),disabled:n||!!o.disabled,icon:o.icon,onClick:o.onHandle,ref:r,text:o.label,tone:o.tone||"primary"})})})}),s&&l.length>0&&e.jsx(C,{marginLeft:1,children:e.jsx(Yo,{actionStates:l,disabled:n})}),o&&o.dialog&&e.jsx(Ne,{dialog:o.dialog,referenceElement:i})]})}const Jo=u.memo(function(){const{actions:n,connectionState:s,documentId:a,editState:o}=z();return!n||!o?null:e.jsx(We,{actions:n,actionProps:o,children:l=>{let{states:i}=l;return e.jsx(Un,{disabled:s!=="connected",showMenu:n.length>1,states:i},a)}})}),qo=u.memo(function(){const{connectionState:n,editState:s,timelineStore:a}=z(),o=pe(a,d=>d.revTime),l=(o==null?void 0:o.id)||"",i=((s==null?void 0:s.draft)||(s==null?void 0:s.published)||{})._rev===l,r=u.useMemo(()=>({...s||{},revision:l}),[s,l]),c=u.useMemo(()=>[ut],[]);return e.jsx(We,{actions:c,actionProps:r,children:d=>{let{states:h}=d;return e.jsx(Un,{disabled:n!=="connected"||!!i,showMenu:!1,states:h})}})}),Zo={primary:"primary",success:"positive",warning:"caution",danger:"critical"};function Qo(t){let{states:n}=t;return e.jsx(js,{space:1,children:n.map((s,a)=>e.jsx(q,{content:s.title&&e.jsx(C,{padding:2,children:e.jsx(D,{size:1,children:s.title})}),disabled:!s.title,placement:"top",portal:!0,children:e.jsx(bs,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:s.color?Zo[s.color]:void 0,style:{whiteSpace:"nowrap"},children:s.label})},String(a)))})}function ea(){const{badges:t,editState:n}=z();return!n||!t?null:e.jsx(ks,{badges:t,badgeProps:n,children:s=>{let{states:a}=s;return e.jsx(Qo,{states:a})}})}const na=A(O)(Qe||(Qe=B([`
  cursor: default;
`])));function ta(t){const{collapsed:n,disabled:s,lastPublished:a,lastUpdated:o,liveEdit:l}=t,i=Y(a||"",{minimal:!0,agoSuffix:!0}),r=Y(a||"",{minimal:!0}),c=Y(o||"",{minimal:!0,agoSuffix:!0}),d=Y(o||"",{minimal:!0});return e.jsx(na,{align:"center","data-ui":"SessionLayout",sizing:"border",children:e.jsx(q,{placement:"top",portal:!0,content:e.jsx(N,{padding:3,space:3,children:e.jsx(D,{size:1,muted:!0,children:l?e.jsxs(e.Fragment,{children:["Last updated ",o?c:i]}):e.jsxs(e.Fragment,{children:["Last published ",i]})})}),children:e.jsx(W,{mode:"bleed",tone:l?"critical":"positive",tabIndex:-1,disabled:s,children:e.jsxs(O,{align:"center",children:[e.jsx(C,{marginRight:n?0:3,children:e.jsx(D,{size:2,children:l?e.jsx(Wt,{}):e.jsx(Nt,{})})}),!n&&e.jsx(D,{size:1,weight:"medium",children:l?e.jsx(e.Fragment,{children:o?d:r}):r})]})})})})}const sa=A(se.path)(en||(en=B([`
  transform-origin: center;
`]))),oa=t=>e.jsx(se.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...t}),aa=t=>e.jsx(sa,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...t}),ia=t=>e.jsx(se.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...t}),ra=t=>e.jsx(se.path,{d:"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z",...t}),ca=pt(nn||(nn=B([`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`]))),la=A.g(tn||(tn=B([`
  transform-origin: center;

  &[data-rotate] {
    animation: `,` 1s ease-in-out infinite;
  }
`])),ca),da={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},ua={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},pa={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},ha={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}},fa={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:0,transition:{duration:0}},changes:{pathLength:1,transition:{duration:.4,delay:.5}}};function ma(t){const{status:n}=t;return n?e.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"",children:e.jsxs(se.g,{variants:da,initial:n,animate:n,children:[e.jsxs(la,{"data-rotate":n==="changes"?void 0:"",children:[e.jsx(aa,{variants:pa,initial:n,animate:n}),e.jsx(oa,{variants:ua,initial:n,animate:n})]}),e.jsx(ia,{variants:ha,initial:n,animate:n}),e.jsx(ra,{variants:fa,initial:n,animate:n})]})}):null}const xa=Le.forwardRef(function(n,s){const{collapsed:a,status:o,lastUpdated:l,...i}=n,r=Y(l||"",{minimal:!0}),c=Y(l||"",{minimal:!0,agoSuffix:!0}),d=u.useMemo(()=>o==="syncing"?{text:"Saving...",tone:void 0}:o==="changes"?{text:r,tone:"caution"}:o==="saved"?{text:"Saved!",tone:"positive"}:{},[o,r]);return o?e.jsx(q,{placement:"top",portal:!0,disabled:o!=="changes",content:e.jsxs(N,{padding:3,space:3,children:[e.jsx(D,{size:1,weight:"semibold",children:"Review changes"}),e.jsxs(D,{size:1,muted:!0,children:["Changes saved ",c]})]}),children:e.jsx(W,{mode:"bleed",justify:"flex-start",tone:d==null?void 0:d.tone,...i,"data-testid":"review-changes-button",ref:s,children:e.jsxs(O,{align:"center",children:[e.jsx(C,{marginRight:a?0:3,children:e.jsx(D,{children:e.jsx(ma,{status:o})})}),!a&&e.jsx(D,{size:1,weight:"medium",children:d==null?void 0:d.text})]})})}):null}),ga=Le.memo(xa),ja=1e3,ba=3e3,ya=u.memo(function(){var n;const{changesOpen:s,documentId:a,documentType:o,editState:l,onHistoryClose:i,onHistoryOpen:r,timelineStore:c,value:d}=z(),h=ht(a,o),p=d==null?void 0:d._updatedAt,x=(n=l==null?void 0:l.published)==null?void 0:n._updatedAt,j=!!(l!=null&&l.liveEdit),g=!!(l!=null&&l.published),y=!!(l!=null&&l.draft),[P,m]=u.useState(null),f=he(P),b=!f||(f==null?void 0:f.width)<300,[_,v]=u.useState(null),I=pe(c,S=>S.onOlderRevision);u.useEffect(()=>{if(_==="syncing"&&!h.isSyncing){const S=setTimeout(()=>v("saved"),ja);return()=>clearTimeout(S)}if(_==="saved"){const S=setTimeout(()=>v(null),ba);return()=>clearTimeout(S)}},[_,p,h.isSyncing]),u.useLayoutEffect(()=>{v(null)},[a]),u.useLayoutEffect(()=>{h.isSyncing&&v("syncing")},[h.isSyncing,p]);const E=u.useMemo(()=>e.jsx(ga,{lastUpdated:p,status:_||(y?"changes":void 0),onClick:s?i:r,disabled:I,selected:s,collapsed:b}),[y,s,i,r,p,I,_,b]),w=u.useMemo(()=>(j||g)&&e.jsx(C,{marginRight:1,children:e.jsx(ta,{disabled:I,lastPublished:x,lastUpdated:p,liveEdit:j,collapsed:b})}),[b,x,p,j,g,I]);return e.jsxs(O,{align:"center","data-ui":"DocumentSparkline",ref:m,children:[w,e.jsxs(O,{align:"center",flex:1,children:[E,!b&&e.jsx(C,{marginLeft:3,children:e.jsx(ea,{})})]})]})}),va=A(C)(sn||(sn=B([`
  min-width: 10em;
  max-width: 16em;
`])));function _a(t){const{actionsBoxRef:n}=t,{badges:s,timelineStore:a}=z(),o=pe(a,l=>l.onOlderRevision);return u.useMemo(()=>e.jsx(C,{paddingLeft:2,paddingRight:[2,3],paddingY:2,children:e.jsxs(O,{align:"center",children:[e.jsx(C,{flex:[1,2],children:s&&e.jsx(ya,{})}),e.jsx(va,{flex:1,marginLeft:[1,3],ref:n,children:o?e.jsx(qo,{}):e.jsx(Jo,{})})]})}),[n,s,o])}function Pa(t){const{actionsBoxElement:n,activeIndex:s,as:a="div",children:o,id:l,onActionStart:i,onKeyDown:r,rootRef:c,states:d,...h}=t,p=d[s],x=u.useCallback(j=>{const g=d.filter(P=>P.shortcut&&Pn(P.shortcut,j)),y=g[0];if(g.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(y.shortcut,'"')),y&&!y.disabled&&y.onHandle){j.preventDefault(),y.onHandle(),i(d.indexOf(y));return}r&&r(j)},[i,r,d]);return u.createElement(a,{id:l,onKeyDown:x,tabIndex:-1,...h,ref:c},[o,p&&p.dialog&&e.jsx(ze,{zOffset:"paneFooter",children:e.jsx(Ne,{dialog:p.dialog,referenceElement:n})})])}const Gn=Le.memo(t=>{const{actionsBoxElement:n,as:s="div",children:a,...o}=t,{actions:l,editState:i}=z(),[r,c]=u.useState(-1),d=u.useCallback(p=>{c(p)},[]),h=u.useMemo(()=>i&&{...i,onComplete:()=>{},revision:void 0},[i]);return!h||!l?null:e.jsx(We,{actionProps:h,actions:l,children:p=>{let{states:x}=p;return e.jsx(Pa,{...o,activeIndex:r,actionsBoxElement:n,as:s,onActionStart:d,states:x,children:a})}})});Gn.displayName="DocumentActionShortcuts";const fn=["fixed","absolute"],Sa=A(ft)(on||(on=B([`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`]))),Aa=u.memo(function(n){const{name:s}=bn();return e.jsx(yn,{name:n.pane.source||s,children:e.jsx(wa,{...n})})});function wa(t){var n;const{pane:s,paneKey:a}=t,{resolveNewDocumentOptions:o}=bn().document,l=ue(),i=Ia(s.options,l.params),{documentType:r,isLoaded:c}=mt(i.id,i.type),d=u.useMemo(()=>o({type:"global"}),[o]),[h,p]=xt({templateItems:d}),x=c&&!p,j=u.useMemo(()=>x&&r&&i.type!==r?Ca(t,i,r):t,[t,r,x,i]),{ReferenceChildLink:g,handleEditReference:y,groupIndex:P,routerPanesState:m}=l,f=((n=m[P+1])==null?void 0:n[0].params)||{},b=m.length,{parentRefPath:_}=f,v=u.useMemo(()=>_?{path:_e(_),state:P>=b-1?"none":P>=b-2?"selected":"pressed"}:{path:[],state:"none"},[_,P,b]);return i.type==="*"&&!x?e.jsx(ee,{flex:2.5,minWidth:320,paneKey:a,title:"Loading document…"}):r?e.jsx(gt,{...j,children:e.jsx(jt,{EditReferenceLinkComponent:g,onEditReference:y,initialValueTemplateItems:h,activePath:v,children:e.jsx(Ea,{})})},"".concat(r,"-").concat(i.id)):e.jsx(Wn,{flex:2.5,minWidth:320,paneKey:a,title:e.jsx(e.Fragment,{children:"The document was not found"}),children:e.jsx(N,{space:4,children:e.jsxs(D,{as:"p",children:["The document type is not defined, and a document with the ",e.jsx("code",{children:i.id})," ","identifier could not be found."]})})})}function Ia(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=bt();return u.useMemo(()=>{if(t.type&&t.type!=="*")return t;const a=t.template||n.template,o=a?s.find(i=>i.id===a):void 0,l=o==null?void 0:o.schemaType;return l?{...t,type:l}:t},[t,n.template,s])}function Ca(t,n,s){return{...t,pane:{...t.pane,options:{...n,type:s}}}}function Ea(){const{changesOpen:t,documentType:n,inspector:s,inspectOpen:a,onFocus:o,onPathOpen:l,onHistoryOpen:i,onKeyUp:r,paneKey:c,schemaType:d,value:h}=z(),{collapsed:p}=vn(),x=yt(),[j,g]=u.useState(null),[y,P]=u.useState(null),[m,f]=u.useState(null),[b,_]=u.useState(null),v=he(y),I=v==null?void 0:v.height,E=u.useCallback(k=>{l(k),o(k)},[l,o]),w=Ft+(s?Ie:0),S=Ht+(s?Ie:0);return d?e.jsxs(Gn,{actionsBoxElement:m,as:le,currentMinWidth:w,"data-testid":"document-pane",flex:2.5,id:c,minWidth:S,onKeyUp:r,rootRef:g,children:[e.jsx(Fe,{position:fn,zOffset:x.portal,children:e.jsx(O,{direction:"column",flex:1,height:p?void 0:"fill",children:e.jsx(Sa,{"data-testid":"change-connector-root",isReviewChangesOpen:t,onOpenReviewChanges:i,onSetFocus:E,children:e.jsx(Fo,{footerHeight:I||null,isInspectOpen:a,rootElement:j,setDocumentPanelPortalElement:_})})})}),e.jsx(fe,{__unstable_elements:{[_n]:b},children:e.jsx(Fe,{position:fn,zOffset:x.portal,children:e.jsx(_t,{ref:P,children:e.jsx(_a,{actionsBoxRef:f})})})}),e.jsx(mo,{})]}):e.jsx(Wn,{currentMinWidth:w,flex:2.5,minWidth:S,paneKey:c,title:e.jsxs(e.Fragment,{children:["Unknown document type: ",e.jsx("code",{children:n})]}),tone:"caution",children:e.jsxs(N,{space:4,children:[n&&e.jsxs(D,{as:"p",children:["This document has the schema type ",e.jsx("code",{children:n}),", which is not defined as a type in the local content studio schema."]}),!n&&e.jsx(D,{as:"p",children:"This document does not exist, and no schema type was specified for it."}),vt]})})}function Da(){return e.jsx(V,{height:"fill",children:e.jsx(O,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:e.jsx(te,{width:0,children:e.jsx(V,{padding:4,radius:2,shadow:1,tone:"caution",children:e.jsxs(O,{children:[e.jsx(C,{children:e.jsx(D,{size:1,children:e.jsx(gn,{})})}),e.jsxs(N,{flex:1,marginLeft:3,space:3,children:[e.jsx(D,{as:"h1",size:1,weight:"bold",children:"No document types"}),e.jsx(D,{as:"p",muted:!0,size:1,children:"Please define at least one document type in your schema."}),e.jsx(D,{as:"p",muted:!0,size:1,children:e.jsx("a",{href:"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio",target:"_blank",rel:"noreferrer",children:"Learn how to add a document type →"})})]})]})})})})})}const Ta=A(Ws)(an||(an=B([`
  min-height: 100%;
  min-width: 320px;
`]))),Ra=Pn("mod+s"),ka=u.memo(function(n){let{onPaneChange:s}=n;var a;const{push:o}=ke(),l=Pt(),{layoutCollapsed:i,setLayoutCollapsed:r}=J(),{paneDataItems:c,resolvedPanes:d}=Zs(),h=Re(u.useCallback(P=>typeof P.intent=="string",[])),[p,x]=u.useState(null),j=u.useCallback(()=>r(!0),[r]),g=u.useCallback(()=>r(!1),[r]);return u.useEffect(()=>{d.length&&s(d)},[s,d]),u.useEffect(()=>{const P=m=>{Ra(m)&&(m.preventDefault(),o({closable:!0,id:"auto-save-message",status:"info",title:"Your work is automatically saved!",duration:4e3}))};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[o]),((a=l._original)==null?void 0:a.types.some(St))?e.jsxs(fe,{element:p||null,children:[e.jsxs(Ta,{flex:1,height:i?void 0:"fill",minWidth:512,onCollapse:j,onExpand:g,children:[c.map(P=>{let{active:m,childItemId:f,groupIndex:b,itemId:_,key:v,pane:I,index:E,params:w,path:S,payload:k,siblingIndex:M,selected:R}=P;return e.jsx(u.Fragment,{children:I===Se?e.jsx(ee,{paneKey:v,path:S,selected:R}):e.jsx(uo,{active:m,groupIndex:b,index:E,pane:I,childItemId:f,itemId:_,paneKey:v,params:w,payload:k,path:S,selected:R,siblingIndex:M})},"".concat(I===Se?"loading":I.type,"-").concat(E))}),c.length<=1&&h&&e.jsx(ee,{paneKey:"intent-resolver"})]}),e.jsx("div",{"data-portal":"",ref:x})]}):e.jsx(Da,{})});function Ma(t){let{tool:{options:n}}=t;const{unstable_sources:s}=Vt(),[a]=s,{source:o,defaultDocumentNode:l,structure:i}=n||{};u.useEffect(()=>(ge([]),()=>ge([])),[]);const[{error:r},c]=u.useState({error:null});return r?e.jsx(oo,{error:r}):e.jsx(Ut,{onCatch:c,children:e.jsx(yn,{name:o||a.name,children:e.jsxs(Gt,{defaultDocumentNode:l,structure:i,children:[e.jsx(ka,{onPaneChange:ge}),e.jsx(no,{})]})})})}var Ba=Object.freeze({__proto__:null,default:Ma});export{Aa as DocumentPane,Ba as index,xo as useDeskToolSetting};
